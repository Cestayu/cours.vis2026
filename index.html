<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Cinema Box Office</title>
<link href="https://fonts.googleapis.com/css2?family=Limelight&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #f7c873;
    --gold-shadow: rgba(247, 200, 115, 0.5);
    --glass: rgba(255, 255, 255, 0.07);
  }

  body {
    margin: 0;
    min-height: 100vh;
    background: #000;
    background-attachment: fixed;
    background-position: center;
    background-size: cover;
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #f5d76e;
    overflow-x: hidden;
    font-family: 'Inter', sans-serif;
    transition: background-image 0.8s ease-in-out;
  }

  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(circle at center, rgba(0,0,0,0.6) 0%, #000 100%);
    z-index: 0;
  }

  h1 {
    margin-top: 60px;
    font-family: 'Limelight', cursive;
    font-size: clamp(48px, 8vw, 90px);
    letter-spacing: 8px;
    text-transform: uppercase;
    color: var(--gold);
    text-shadow: 0 0 30px var(--gold-shadow);
    z-index: 2;
    text-align: center;
  }

  #boxoffice-viz {
    position: relative;
    width: 90%;
    max-width: 1100px;
    margin-bottom: 60px;
    background: rgba(0,0,0,0.8);
    border: 1px solid rgba(255, 215, 120, 0.1);
    border-radius: 30px;
    padding: 50px;
    box-shadow: 0 30px 60px rgba(0,0,0,0.8);
    z-index: 2;
    backdrop-filter: blur(20px);
  }

  /* Modified Search & Controls Section */
  .controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 35px;
    margin-bottom: 50px;
  }

  .search-wrapper {
    position: relative;
    width: 100%;
    max-width: 650px;
  }

  .search-wrapper::before {
    content: "üîç";
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    opacity: 0.5;
    z-index: 3;
  }

  #search-bar {
    width: 100%;
    padding: 18px 25px 18px 55px;
    border-radius: 50px;
    border: 1px solid rgba(247, 200, 115, 0.2);
    background: var(--glass);
    color: white;
    font-size: 18px;
    outline: none;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-sizing: border-box;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
  }

  #search-bar:focus {
    background: rgba(255, 255, 255, 0.12);
    border-color: var(--gold);
    box-shadow: 0 0 25px var(--gold-shadow);
    transform: scale(1.02);
  }

  .slider-container {
    width: 100%;
    max-width: 500px;
    text-align: center;
  }

  .year-display {
    font-family: 'Limelight', cursive;
    font-size: 72px;
    line-height: 1;
    color: var(--gold);
    text-shadow: 0 0 15px var(--gold-shadow);
    margin-bottom: 15px;
  }

  input[type=range] {
    width: 100%;
    accent-color: var(--gold);
    cursor: pointer;
    height: 6px;
  }

  /* Films Panel Styling */
  .films-panel {
    display: grid;
    gap: 25px;
  }

  .film {
    display: flex;
    align-items: center;
    padding: 20px;
    border: 1px solid rgba(255, 215, 120, 0.1);
    border-radius: 20px;
    background: rgba(255,255,255,0.02);
    transition: all 0.3s ease;
    animation: slideIn 0.6s ease forwards;
    opacity: 0;
  }

  @keyframes slideIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .film:hover {
    transform: translateX(10px);
    background: rgba(255,255,255,0.06);
    border-color: var(--gold);
  }

  .poster {
    width: 110px;
    height: 165px;
    border-radius: 12px;
    background-size: cover;
    background-position: center;
    box-shadow: 0 10px 20px rgba(0,0,0,0.6);
    flex-shrink: 0;
  }

  .info {
    margin-left: 30px;
    flex: 1;
  }

  .film-title {
    font-family: 'Limelight', cursive;
    font-size: 28px;
    margin-bottom: 10px;
    color: var(--gold);
  }

  .meta-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .tag {
    background: rgba(247, 200, 115, 0.1);
    padding: 6px 12px;
    border-radius: 6px;
    border: 1px solid rgba(247, 200, 115, 0.2);
    color: #eee;
  }

  .box-office-amount {
    font-weight: 600;
    color: #fff;
    font-size: 20px;
    margin-top: 15px;
  }

  .lamp {
    position: fixed;
    top: -20px;
    width: 2px;
    height: 2px;
    background: var(--gold);
    box-shadow: 0 0 120px 60px rgba(247, 200, 115, 0.15);
    z-index: 1;
  }
  .lamp.left { left: 10%; }
  .lamp.right { right: 10%; }
</style>
</head>

<body>
  <div class="lamp left"></div>
  <div class="lamp right"></div>
  <h1>Cinema</h1>

  <section id="boxoffice-viz">
    <div class="controls">
      <div class="search-wrapper">
        <input type="text" id="search-bar" placeholder="Rechercher un film, un r√©alisateur, un genre...">
      </div>

      <div class="slider-container">
        <div class="year-display" id="boxoffice-year">2013</div>
        <input type="range" min="2013" max="2023" step="1" value="2013" id="boxoffice-slider">
      </div>
    </div>

    <div class="films-panel" id="boxoffice-films"></div>
  </section>

<script>
  (function () {
    const enrichedData = [
      {"year":2013,"rank":1,"title":"Frozen","boxOffice":"1280802282","genre":"Animation","country":"√âtats-Unis","director":"Chris Buck, Jennifer Lee","directorGender":"Homme / Femme","poster":"https://image.tmdb.org/t/p/w500/kgwjIb1CkFCftymFGOtdLlOrWYv.jpg"},
      {"year":2013,"rank":2,"title":"Iron Man 3","boxOffice":"1214811252","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"Shane Black","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/qhPtAc1TKbMPqNvcdXSOn9Bn7hZ.jpg"},
      {"year":2013,"rank":3,"title":"Despicable Me 2","boxOffice":"970766005","genre":"Animation","country":"√âtats-Unis","director":"Pierre Coffin, Chris Renaud","directorGender":"Hommes","poster":"https://image.tmdb.org/t/p/w500/5Fh4NdoEnCjCK9wLjdJ9DJNFl2b.jpg"},
      {"year":2013,"rank":4,"title":"The Hobbit: The Desolation of Smaug","boxOffice":"958366855","genre":"Fantasy","country":"Nouvelle-Z√©lande / √âtats-Unis","director":"Peter Jackson","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/xQYiXsmeYkKMq5yvwD0ejl8cWs7.jpg"},
      {"year":2013,"rank":5,"title":"The Hunger Games: Catching Fire","boxOffice":"865011746","genre":"Science-fiction","country":"√âtats-Unis","director":"Francis Lawrence","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/v9qVkyS58WHdfrcEq0dxUJFKS9n.jpg"},
      {"year":2014,"rank":1,"title":"Transformers: Age of Extinction","boxOffice":"1104054072","genre":"Action / Science-fiction","country":"√âtats-Unis","director":"Michael Bay","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/jyzrfx2WaeY60kYZpPYepSjGz4S.jpg"},
      {"year":2014,"rank":2,"title":"The Hobbit: The Battle of the Five Armies","boxOffice":"962201338","genre":"Fantasy","country":"Nouvelle-Z√©lande / √âtats-Unis","director":"Peter Jackson","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/9zd9P2J3N7A4hBgx1RGCFgTMBPk.jpg"},
      {"year":2014,"rank":3,"title":"Guardians of the Galaxy","boxOffice":"773350147","genre":"Action / Science-fiction","country":"√âtats-Unis","director":"James Gunn","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/r7vmZjiyZw9rpJMQJdXpjgiCOk9.jpg"},
      {"year":2014,"rank":4,"title":"Maleficent","boxOffice":"758536735","genre":"Fantasy","country":"√âtats-Unis","director":"Robert Stromberg","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/bDG3yei6AJlEAK3A5wN7RwFXQ7V.jpg"},
      {"year":2014,"rank":5,"title":"The Hunger Games: Mockingjay ‚Äì Part 1","boxOffice":"755356711","genre":"Science-fiction","country":"√âtats-Unis","director":"Francis Lawrence","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/4PwyB0ErucIANzW24Kori71J6gU.jpg"},
      {"year":2015,"rank":1,"title":"Star Wars: The Force Awakens","boxOffice":"2068223624","genre":"Science-fiction","country":"√âtats-Unis","director":"J. J. Abrams","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/wqnLdwVXoBjKibFRR5U3y0aDUhs.jpg"},
      {"year":2015,"rank":2,"title":"Jurassic World","boxOffice":"1671537444","genre":"Science-fiction","country":"√âtats-Unis","director":"Colin Trevorrow","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/jIlQHSUc1NnqhbWtkkdIrYLiNl7.jpg"},
      {"year":2015,"rank":3,"title":"Furious 7","boxOffice":"1515341399","genre":"Action","country":"√âtats-Unis","director":"James Wan","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/dCgm7efXDmiABSdWDHBDBx2jwmn.jpg"},
      {"year":2015,"rank":4,"title":"Avengers: Age of Ultron","boxOffice":"1402809540","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"Joss Whedon","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/4ssDuvEDkSArWEdyBl2X5EHvYKU.jpg"},
      {"year":2015,"rank":5,"title":"Minions","boxOffice":"1159444662","genre":"Animation","country":"√âtats-Unis","director":"Pierre Coffin, Kyle Balda","directorGender":"Hommes","poster":"https://image.tmdb.org/t/p/w500/dr02BdCNAUPVU07aOodwPYv6HCf.jpg"},
      {"year":2016,"rank":1,"title":"Captain America: Civil War","boxOffice":"1153337496","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"Anthony & Joe Russo","directorGender":"Hommes","poster":"https://image.tmdb.org/t/p/w500/rAGiXaUfPu0D2BJ1JMQzJiD8tFl.jpg"},
      {"year":2016,"rank":2,"title":"Rogue One: A Star Wars Story","boxOffice":"1056057273","genre":"Science-fiction","country":"√âtats-Unis","director":"Gareth Edwards","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/i0yw1mFbB7sNGHCs7EXZPzFkdA1.jpg"},
      {"year":2016,"rank":3,"title":"Finding Dory","boxOffice":"1028570889","genre":"Animation","country":"√âtats-Unis","director":"Andrew Stanton","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/yFjVlsJmEMacU0BNUwdGZlo2ixq.jpg"},
      {"year":2016,"rank":4,"title":"Zootopia","boxOffice":"1025521689","genre":"Animation","country":"√âtats-Unis","director":"Byron Howard, Rich Moore","directorGender":"Hommes","poster":"https://image.tmdb.org/t/p/w500/hlK0e0wAQ3VLuJcsfIYPvb4JVud.jpg"},
      {"year":2016,"rank":5,"title":"The Jungle Book","boxOffice":"967724775","genre":"Aventure / Fantasy","country":"√âtats-Unis","director":"Jon Favreau","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/vOipe2myi26UDwP978hsYOrnUWC.jpg"},
      {"year":2017,"rank":1,"title":"Star Wars: The Last Jedi","boxOffice":"1334407706","genre":"Science-fiction","country":"√âtats-Unis","director":"Rian Johnson","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/kOVEVeg59E0wsnXmF9nrh6OmWII.jpg"},
      {"year":2017,"rank":2,"title":"Beauty and the Beast","boxOffice":"1266115964","genre":"Fantasy","country":"√âtats-Unis","director":"Bill Condon","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/hKegSKIDep2ewJWPUQD7u0KqFIp.jpg"},
      {"year":2017,"rank":3,"title":"The Fate of the Furious","boxOffice":"1236005118","genre":"Action","country":"√âtats-Unis","director":"F. Gary Gray","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/dImWM7GJqryWJO9LHa3XQ8DD5NH.jpg"},
      {"year":2017,"rank":4,"title":"Despicable Me 3","boxOffice":"1034800131","genre":"Animation","country":"√âtats-Unis","director":"Kyle Balda","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/6t3YWl7hrr88lCEFlGVqW5yV99R.jpg"},
      {"year":2017,"rank":5,"title":"Jumanji: Welcome to the Jungle","boxOffice":"962102237","genre":"Aventure","country":"√âtats-Unis","director":"Jake Kasdan","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/bXrZ5iHBEjH7WMidbUDQ0U2xbmr.jpg"},
      {"year":2018,"rank":1,"title":"Avengers: Infinity War","boxOffice":"2048359754","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"Anthony & Joe Russo","directorGender":"Hommes","poster":"https://image.tmdb.org/t/p/w500/7WsyChQLEftFiDOVTGkv3hFpyyt.jpg"},
      {"year":2018,"rank":2,"title":"Black Panther","boxOffice":"1347597973","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"Ryan Coogler","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/uxzzxijgPIY7slzFvMotPv8wjKA.jpg"},
      {"year":2018,"rank":3,"title":"Jurassic World: Fallen Kingdom","boxOffice":"1308467944","genre":"Science-fiction","country":"√âtats-Unis","director":"J. A. Bayona","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/c9XxwwhPHdaImA2f1WEfEsbhaFB.jpg"},
      {"year":2018,"rank":4,"title":"Incredibles 2","boxOffice":"1242805359","genre":"Animation","country":"√âtats-Unis","director":"Brad Bird","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/9lFKBtaVIhP7E2Pk0IY1CwTKTMZ.jpg"},
      {"year":2018,"rank":5,"title":"Aquaman","boxOffice":"1148528393","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"James Wan","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/5Kg76ldv7VxeX9YlcQXiowHgdX6.jpg"},
      {"year":2019,"rank":1,"title":"Avengers: Endgame","boxOffice":"2797501328","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"Anthony & Joe Russo","directorGender":"Hommes","poster":"https://image.tmdb.org/t/p/w500/or06FN3Dka5tukK1e9sl16pB3iy.jpg"},
      {"year":2019,"rank":2,"title":"The Lion King","boxOffice":"1656943394","genre":"Animation","country":"√âtats-Unis","director":"Jon Favreau","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/dzBtMocZuJbjLOXvrl4zGYigDzh.jpg"},
      {"year":2019,"rank":3,"title":"Frozen II","boxOffice":"1450026933","genre":"Animation","country":"√âtats-Unis","director":"Chris Buck, Jennifer Lee","directorGender":"Homme / Femme","poster":"https://image.tmdb.org/t/p/w500/xJWPZIYOEFIjZpBL7SVBGnzRYXp.jpg"},
      {"year":2019,"rank":4,"title":"Spider-Man: Far From Home","boxOffice":"1131927996","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"Jon Watts","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/4q2NNj4S5dG2RLF9CpXsej7yXl.jpg"},
      {"year":2019,"rank":5,"title":"Captain Marvel","boxOffice":"1128462972","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"Anna Boden, Ryan Fleck","directorGender":"Femme / Homme","poster":"https://image.tmdb.org/t/p/w500/AtsgWhDnHTq68L0lLsUrCnM7TjG.jpg"},
      {"year":2020,"rank":1,"title":"The Eight Hundred","boxOffice":"461421559","genre":"Guerre","country":"Chine","director":"Guan Hu","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/pk4GFAALvJhckzPY5h3L1RkfSD6.jpg"},
      {"year":2020,"rank":2,"title":"Bad Boys for Life","boxOffice":"426505244","genre":"Action","country":"√âtats-Unis","director":"Adil El Arbi, Bilall Fallah","directorGender":"Hommes","poster":"https://image.tmdb.org/t/p/w500/y95lQLnuNKdPAzw9F9Ab8kJ80c3.jpg"},
      {"year":2020,"rank":3,"title":"My People, My Homeland","boxOffice":"422390820","genre":"Com√©die","country":"Chine","director":"Collectif","directorGender":"Hommes","poster":"https://image.tmdb.org/t/p/w500/A68gGiKxr2OfQRSztVmnn8dUVjy.jpg"},
      {"year":2020,"rank":4,"title":"Tenet","boxOffice":"365304105","genre":"Science-fiction","country":"√âtats-Unis","director":"Christopher Nolan","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/k68nPLbIST6NP96JmTxmZijEvCA.jpg"},
      {"year":2020,"rank":5,"title":"Sonic the Hedgehog","boxOffice":"319715683","genre":"Aventure","country":"√âtats-Unis","director":"Jeff Fowler","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/aQvJ5WPzZgYVDrxLX4R6cLJCEaQ.jpg"},
      {"year":2021,"rank":1,"title":"Spider-Man: No Way Home","boxOffice":"1921847111","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"Jon Watts","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/1g0dhYtq4irTY1GPXvft6k4YLjm.jpg"},
      {"year":2021,"rank":2,"title":"The Battle at Lake Changjin","boxOffice":"902548476","genre":"Guerre","country":"Chine","director":"Chen Kaige","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/9Ehh32tx0IJM7RKIFMsTDPJUfZK.jpg"},
      {"year":2021,"rank":3,"title":"Hi, Mom","boxOffice":"841674419","genre":"Com√©die dramatique","country":"Chine","director":"Jia Ling","directorGender":"Femme","poster":"https://image.tmdb.org/t/p/w500/aN8vJdg3FG0KNBtt7mkFGELi1w6.jpg"},
      {"year":2021,"rank":4,"title":"No Time to Die","boxOffice":"774153007","genre":"Action","country":"Royaume-Uni / √âtats-Unis","director":"Cary Joji Fukunaga","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/iUgygt3fscRoKWCV1d0C7FbM9TP.jpg"},
      {"year":2021,"rank":5,"title":"F9","boxOffice":"726229501","genre":"Action","country":"√âtats-Unis","director":"Justin Lin","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/bOFaAXmWWXC3Rbv4u4uM9ZSzRXP.jpg"},
      {"year":2022,"rank":1,"title":"Avatar: The Way of Water","boxOffice":"2320250281","genre":"Science-fiction","country":"√âtats-Unis","director":"James Cameron","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg"},
      {"year":2022,"rank":2,"title":"Top Gun: Maverick","boxOffice":"1495696292","genre":"Action","country":"√âtats-Unis","director":"Joseph Kosinski","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/62HCnUTziyWcpDaBO2i1DX17ljH.jpg"},
      {"year":2022,"rank":3,"title":"Jurassic World Dominion","boxOffice":"1001978080","genre":"Science-fiction","country":"√âtats-Unis","director":"Colin Trevorrow","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/kAVRgw7GgK1CfYEJq8ME6EvRIgU.jpg"},
      {"year":2022,"rank":4,"title":"Doctor Strange in the Multiverse of Madness","boxOffice":"955775804","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"Sam Raimi","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/9Gtg2DzBhmYamXBS1hKAhiwbBKS.jpg"},
      {"year":2022,"rank":5,"title":"Minions: The Rise of Gru","boxOffice":"940203765","genre":"Animation","country":"√âtats-Unis","director":"Kyle Balda","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/wKiOkZTN9lUUUNZLmtnwubZYONg.jpg"},
      {"year":2023,"rank":1,"title":"Barbie","boxOffice":"1445638421","genre":"Com√©die / Fantasy","country":"√âtats-Unis","director":"Greta Gerwig","directorGender":"Femme","poster":"https://image.tmdb.org/t/p/w500/iuFNMS8U5cb6xfzi51Dbkovj7vM.jpg"},
      {"year":2023,"rank":2,"title":"The Super Mario Bros. Movie","boxOffice":"1361992475","genre":"Animation","country":"√âtats-Unis","director":"Aaron Horvath, Michael Jelenic","directorGender":"Hommes","poster":"https://image.tmdb.org/t/p/w500/qNBAXBIQlnOThrVvA6mA2B5ggV6.jpg"},
      {"year":2023,"rank":3,"title":"Oppenheimer","boxOffice":"975440031","genre":"Drame historique","country":"√âtats-Unis","director":"Christopher Nolan","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/8Gxv8gSFCU0XGDykEGv7zR1n2ua.jpg"},
      {"year":2023,"rank":4,"title":"Guardians of the Galaxy Vol. 3","boxOffice":"845555777","genre":"Action / Super-h√©ros","country":"√âtats-Unis","director":"James Gunn","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/r2J02Z2OpNTctfOSN1Ydgii51I3.jpg"},
      {"year":2023,"rank":5,"title":"Fast X","boxOffice":"704875015","genre":"Action","country":"√âtats-Unis","director":"Louis Leterrier","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/fiVW06jE7z9YnO4trhaMEdclSiC.jpg"}
    ];

    const slider = document.getElementById("boxoffice-slider");
    const yearDisplay = document.getElementById("boxoffice-year");
    const searchBar = document.getElementById("search-bar");
    const panel = document.getElementById("boxoffice-films");

    function formatBoxOffice(value) {
      return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(value);
    }

    function update() {
      const year = slider.value;
      const term = searchBar.value.toLowerCase();
      yearDisplay.textContent = year;
      panel.innerHTML = "";

      const films = enrichedData.filter(d => 
        d.year == year && 
        (d.title.toLowerCase().includes(term) || d.director.toLowerCase().includes(term) || d.genre.toLowerCase().includes(term))
      );

      const topFilm = enrichedData.find(d => d.year == year && d.rank == 1);
      if (topFilm) {
        document.body.style.backgroundImage = `url('${topFilm.poster}')`;
      }

      films.forEach((film, index) => {
        const filmEl = document.createElement('div');
        filmEl.className = 'film';
        filmEl.style.animationDelay = `${index * 0.1}s`;
        
        filmEl.innerHTML = `
          <div class="poster" style="background-image:url('${film.poster}')"></div>
          <div class="info">
            <div class="film-title">#${film.rank} ${film.title}</div>
            <div class="meta-grid">
              <span class="tag">${film.genre}</span>
              <span class="tag">üé¨ ${film.director}</span>
              <span class="tag">üåç ${film.country}</span>
            </div>
            <div class="box-office-amount">${formatBoxOffice(film.boxOffice)}</div>
          </div>
        `;
        panel.appendChild(filmEl);
      });
      
      if(films.length === 0) {
        panel.innerHTML = `<div style="text-align:center; padding: 60px; font-style: italic; opacity: 0.5; font-size: 18px;">Aucun film ne correspond √† votre recherche pour l'ann√©e ${year}.</div>`;
      }
    }

    slider.addEventListener("input", update);
    searchBar.addEventListener("input", update);
    update();

  })();
</script>
</body>
</html>
