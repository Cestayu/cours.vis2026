
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Cinema Box Office Royale & Analytics</title>
<link href="https://fonts.googleapis.com/css2?family=Limelight&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #f7c873;
    --gold-shadow: rgba(247, 200, 115, 0.5);
    --covid-color: rgba(255, 69, 58, 0.2);
  }

  body {
    margin: 0;
    min-height: 100vh;
    background: #000;
    background-attachment: fixed;
    background-position: center;
    background-size: cover;
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #f5d76e;
    overflow-x: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    transition: background-image 0.8s ease-in-out;
  }

  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(circle at center, rgba(0,0,0,0.7) 0%, #000 100%);
    z-index: 0;
  }

  h1 {
    margin-top: 40px;
    font-family: 'Limelight', cursive;
    font-size: clamp(48px, 10vw, 80px);
    letter-spacing: 8px;
    text-transform: uppercase;
    color: var(--gold);
    text-shadow: 0 0 20px var(--gold-shadow);
    z-index: 2;
  }

  /* --- Styles du Dashboard --- */
  #boxoffice-viz {
    position: relative;
    width: 90%;
    max-width: 1000px;
    margin-bottom: 60px;
    background: rgba(0,0,0,0.85);
    border: 1px solid rgba(255, 215, 120, 0.2);
    border-radius: 20px;
    padding: 30px;
    z-index: 2;
    backdrop-filter: blur(10px);
  }

  .controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    margin-bottom: 30px;
  }

  .year-display { font-family: 'Limelight', cursive; font-size: 48px; color: var(--gold); }
  
  input[type=range] { flex: 1; accent-color: var(--gold); cursor: pointer; }

  /* Bouton Analyse Graphique */
  .btn-stats {
    background: transparent;
    border: 2px solid var(--gold);
    color: var(--gold);
    padding: 10px 20px;
    font-family: 'Limelight', cursive;
    cursor: pointer;
    border-radius: 5px;
    transition: all 0.3s;
    text-transform: uppercase;
  }
  .btn-stats:hover { background: var(--gold); color: #000; box-shadow: 0 0 15px var(--gold); }

  .films-panel { display: grid; gap: 15px; }

  .film {
    display: flex; align-items: center; padding: 12px;
    border: 1px solid rgba(255, 215, 120, 0.1);
    border-radius: 12px; background: rgba(255,255,255,0.03);
    animation: slideIn 0.4s ease forwards; opacity: 0;
  }

  @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

  .poster { width: 80px; height: 120px; border-radius: 6px; background-size: cover; flex-shrink: 0; }
  .info { margin-left: 20px; flex: 1; }
  .film-title { font-family: 'Limelight', cursive; font-size: 20px; color: var(--gold); }
  .box-office-amount { font-weight: bold; color: #fff; margin-top: 5px; }

  /* --- Overlay Graphique --- */
  #chart-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.95);
    z-index: 100; display: none; flex-direction: column; align-items: center; justify-content: center;
  }

  .chart-container {
    width: 90%; max-width: 900px; height: 500px;
    background: #111; border: 1px solid var(--gold);
    padding: 20px; border-radius: 10px; position: relative;
  }

  .close-btn { position: absolute; top: 20px; right: 30px; font-size: 40px; cursor: pointer; color: var(--gold); }

  /* Style du Graphique SVG */
  .line { fill: none; stroke: var(--gold); stroke-width: 3; stroke-linecap: round; }
  .dot { fill: var(--gold); cursor: pointer; }
  .dot:hover { r: 8; fill: #fff; }
  .axis-text { fill: rgba(255,215,120,0.6); font-size: 12px; }
  .covid-zone { fill: var(--covid-color); }
</style>
</head>

<body>
  <h1>Cinema</h1>

  <section id="boxoffice-viz">
    <div class="controls">
      <div class="year-display" id="boxoffice-year">2013</div>
      <input type="range" min="2013" max="2023" step="1" value="2013" id="boxoffice-slider">
      <button class="btn-stats" onclick="toggleChart(true)">ðŸ“Š Analyse MarchÃ©</button>
    </div>
    <div class="films-panel" id="boxoffice-films"></div>
  </section>

  <div id="chart-overlay">
    <span class="close-btn" onclick="toggleChart(false)">&times;</span>
    <h2 style="font-family: 'Limelight'; color: var(--gold); font-size: 32px;">Ã‰volution du NÂ°1 Mondial (2013-2023)</h2>
    <div class="chart-container">
      <svg id="chart-svg" viewBox="0 0 800 400" preserveAspectRatio="xMidYMid meet" style="width:100%; height:100%;"></svg>
    </div>
    <p style="color: #999; margin-top: 20px;">* La zone rouge met en Ã©vidence l'impact de la pandÃ©mie (2020-2021)</p>
  </div>

<script>
  (function () {
    const data = [
      {"year":2013,"rank":1,"title":"Frozen","boxOffice":1280802282,"poster":"https://image.tmdb.org/t/p/w500/kgwjIb1CkFCftymFGOtdLlOrWYv.jpg"},
      {"year":2013,"rank":2,"title":"Iron Man 3","boxOffice":1214811252,"poster":"https://image.tmdb.org/t/p/w500/qhPtAc1TKbMPqNvcdXSOn9Bn7hZ.jpg"},
      {"year":2013,"rank":3,"title":"Despicable Me 2","boxOffice":970766005,"poster":"https://image.tmdb.org/t/p/w500/5Fh4NdoEnCjCK9wLjdJ9DJNFl2b.jpg"},
      {"year":2013,"rank":4,"title":"The Hobbit: Desolation","boxOffice":958366855,"poster":"https://image.tmdb.org/t/p/w500/xQYiXsmeYkKMq5yvwD0ejl8cWs7.jpg"},
      {"year":2013,"rank":5,"title":"Hunger Games 2","boxOffice":865011746,"poster":"https://image.tmdb.org/t/p/w500/v9qVkyS58WHdfrcEq0dxUJFKS9n.jpg"},
      {"year":2014,"rank":1,"title":"Transformers 4","boxOffice":1104054072,"poster":"https://image.tmdb.org/t/p/w500/jyzrfx2WaeY60kYZpPYepSjGz4S.jpg"},
      {"year":2014,"rank":2,"title":"The Hobbit 3","boxOffice":962201338,"poster":"https://image.tmdb.org/t/p/w500/9zd9P2J3N7A4hBgx1RGCFgTMBPk.jpg"},
      {"year":2014,"rank":3,"title":"Guardians Vol 1","boxOffice":773350147,"poster":"https://image.tmdb.org/t/p/w500/r7vmZjiyZw9rpJMQJdXpjgiCOk9.jpg"},
      {"year":2014,"rank":4,"title":"Maleficent","boxOffice":758536735,"poster":"https://image.tmdb.org/t/p/w500/bDG3yei6AJlEAK3A5wN7RwFXQ7V.jpg"},
      {"year":2014,"rank":5,"title":"Hunger Games 3.1","boxOffice":755356711,"poster":"https://image.tmdb.org/t/p/w500/4PwyB0ErucIANzW24Kori71J6gU.jpg"},
      {"year":2015,"rank":1,"title":"Star Wars VII","boxOffice":2068223624,"poster":"https://image.tmdb.org/t/p/w500/wqnLdwVXoBjKibFRR5U3y0aDUhs.jpg"},
      {"year":2015,"rank":2,"title":"Jurassic World","boxOffice":1671537444,"poster":"https://image.tmdb.org/t/p/w500/jIlQHSUc1NnqhbWtkkdIrYLiNl7.jpg"},
      {"year":2015,"rank":3,"title":"Furious 7","boxOffice":1515341399,"poster":"https://image.tmdb.org/t/p/w500/dCgm7efXDmiABSdWDHBDBx2jwmn.jpg"},
      {"year":2015,"rank":4,"title":"Avengers: Ultron","boxOffice":1402809540,"poster":"https://image.tmdb.org/t/p/w500/4ssDuvEDkSArWEdyBl2X5EHvYKU.jpg"},
      {"year":2015,"rank":5,"title":"Minions","boxOffice":1159444662,"poster":"https://image.tmdb.org/t/p/w500/dr02BdCNAUPVU07aOodwPYv6HCf.jpg"},
      {"year":2016,"rank":1,"title":"Civil War","boxOffice":1153337496,"poster":"https://image.tmdb.org/t/p/w500/rAGiXaUfPu0D2BJ1JMQzJiD8tFl.jpg"},
      {"year":2016,"rank":2,"title":"Rogue One","boxOffice":1056057273,"poster":"https://image.tmdb.org/t/p/w500/i0yw1mFbB7sNGHCs7EXZPzFkdA1.jpg"},
      {"year":2016,"rank":3,"title":"Finding Dory","boxOffice":1028570889,"poster":"https://image.tmdb.org/t/p/w500/yFjVlsJmEMacU0BNUwdGZlo2ixq.jpg"},
      {"year":2016,"rank":4,"title":"Zootopia","boxOffice":1025521689,"poster":"https://image.tmdb.org/t/p/w500/hlK0e0wAQ3VLuJcsfIYPvb4JVud.jpg"},
      {"year":2016,"rank":5,"title":"The Jungle Book","boxOffice":967724775,"poster":"https://image.tmdb.org/t/p/w500/vOipe2myi26UDwP978hsYOrnUWC.jpg"},
      {"year":2017,"rank":1,"title":"Star Wars VIII","boxOffice":1334407706,"poster":"https://image.tmdb.org/t/p/w500/kOVEVeg59E0wsnXmF9nrh6OmWII.jpg"},
      {"year":2017,"rank":2,"title":"Beauty/Beast","boxOffice":1266115964,"poster":"https://image.tmdb.org/t/p/w500/hKegSKIDep2ewJWPUQD7u0KqFIp.jpg"},
      {"year":2017,"rank":3,"title":"Furious 8","boxOffice":1236005118,"poster":"https://image.tmdb.org/t/p/w500/dImWM7GJqryWJO9LHa3XQ8DD5NH.jpg"},
      {"year":2017,"rank":4,"title":"Despicable Me 3","boxOffice":1034800131,"poster":"https://image.tmdb.org/t/p/w500/6t3YWl7hrr88lCEFlGVqW5yV99R.jpg"},
      {"year":2017,"rank":5,"title":"Jumanji 2","boxOffice":962102237,"poster":"https://image.tmdb.org/t/p/w500/bXrZ5iHBEjH7WMidbUDQ0U2xbmr.jpg"},
      {"year":2018,"rank":1,"title":"Infinity War","boxOffice":2048359754,"poster":"https://image.tmdb.org/t/p/w500/7WsyChQLEftFiDOVTGkv3hFpyyt.jpg"},
      {"year":2018,"rank":2,"title":"Black Panther","boxOffice":1347597973,"poster":"https://image.tmdb.org/t/p/w500/uxzzxijgPIY7slzFvMotPv8wjKA.jpg"},
      {"year":2018,"rank":3,"title":"Jurassic World 2","boxOffice":1308467944,"poster":"https://image.tmdb.org/t/p/w500/c9XxwwhPHdaImA2f1WEfEsbhaFB.jpg"},
      {"year":2018,"rank":4,"title":"Incredibles 2","boxOffice":1242805359,"poster":"https://image.tmdb.org/t/p/w500/9lFKBtaVIhP7E2Pk0IY1CwTKTMZ.jpg"},
      {"year":2018,"rank":5,"title":"Aquaman","boxOffice":1148528393,"poster":"https://image.tmdb.org/t/p/w500/5Kg76ldv7VxeX9YlcQXiowHgdX6.jpg"},
      {"year":2019,"rank":1,"title":"Endgame","boxOffice":2797501328,"poster":"https://image.tmdb.org/t/p/w500/or06FN3Dka5tukK1e9sl16pB3iy.jpg"},
      {"year":2019,"rank":2,"title":"The Lion King","boxOffice":1656943394,"poster":"https://image.tmdb.org/t/p/w500/dzBtMocZuJbjLOXvrl4zGYigDzh.jpg"},
      {"year":2019,"rank":3,"title":"Frozen II","boxOffice":1450026933,"poster":"https://image.tmdb.org/t/p/w500/xJWPZIYOEFIjZpBL7SVBGnzRYXp.jpg"},
      {"year":2019,"rank":4,"title":"Spiderman 2","boxOffice":1131927996,"poster":"https://image.tmdb.org/t/p/w500/4q2NNj4S5dG2RLF9CpXsej7yXl.jpg"},
      {"year":2019,"rank":5,"title":"Captain Marvel","boxOffice":1128462972,"poster":"https://image.tmdb.org/t/p/w500/AtsgWhDnHTq68L0lLsUrCnM7TjG.jpg"},
      {"year":2020,"rank":1,"title":"The Eight Hundred","boxOffice":461421559,"poster":"https://image.tmdb.org/t/p/w500/pk4GFAALvJhckzPY5h3L1RkfSD6.jpg"},
      {"year":2020,"rank":2,"title":"Bad Boys 3","boxOffice":426505244,"poster":"https://image.tmdb.org/t/p/w500/y95lQLnuNKdPAzw9F9Ab8kJ80c3.jpg"},
      {"year":2021,"rank":1,"title":"Spiderman: No Way Home","boxOffice":1921847111,"poster":"https://image.tmdb.org/t/p/w500/1g0dhYtq4irTY1GPXvft6k4YLjm.jpg"},
      {"year":2021,"rank":2,"title":"Lake Changjin","boxOffice":902548476,"poster":"https://image.tmdb.org/t/p/w500/9Ehh32tx0IJM7RKIFMsTDPJUfZK.jpg"},
      {"year":2022,"rank":1,"title":"Avatar 2","boxOffice":2320250281,"poster":"https://image.tmdb.org/t/p/w500/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg"},
      {"year":2022,"rank":2,"title":"Top Gun 2","boxOffice":1495696292,"poster":"https://image.tmdb.org/t/p/w500/62HCnUTziyWcpDaBO2i1DX17ljH.jpg"},
      {"year":2023,"rank":1,"title":"Barbie","boxOffice":1445638421,"poster":"https://image.tmdb.org/t/p/w500/iuFNMS8U5cb6xfzi51Dbkovj7vM.jpg"},
      {"year":2023,"rank":2,"title":"Mario Movie","boxOffice":1361992475,"poster":"https://image.tmdb.org/t/p/w500/qNBAXBIQlnOThrVvA6mA2B5ggV6.jpg"}
    ];

    const slider = document.getElementById("boxoffice-slider");
    const yearDisplay = document.getElementById("boxoffice-year");
    const panel = document.getElementById("boxoffice-films");

    function update() {
      const year = slider.value;
      yearDisplay.textContent = year;
      panel.innerHTML = "";
      
      const filtered = data.filter(d => d.year == year).sort((a,b) => a.rank - b.rank);
      
      // Fond dynamique (basÃ© sur le NÂ°1)
      const topFilm = filtered.find(f => f.rank === 1);
      if (topFilm) document.body.style.backgroundImage = `url('${topFilm.poster}')`;

      filtered.forEach((f, i) => {
        panel.innerHTML += `
          <div class="film" style="animation-delay: ${i*0.1}s">
            <div class="poster" style="background-image:url('${f.poster}')"></div>
            <div class="info">
              <div class="film-title">#${f.rank} ${f.title}</div>
              <div class="box-office-amount">$${f.boxOffice.toLocaleString()}</div>
            </div>
          </div>
        `;
      });
    }

    // --- Logique du Graphique ---
    window.toggleChart = function(show) {
      const overlay = document.getElementById('chart-overlay');
      overlay.style.display = show ? 'flex' : 'none';
      if(show) drawChart();
    }

    function drawChart() {
      const svg = document.getElementById('chart-svg');
      svg.innerHTML = '';
      
      const topOnes = data.filter(d => d.rank === 1);
      const maxBO = Math.max(...topOnes.map(d => d.boxOffice));
      
      const padding = 60;
      const w = 800 - padding * 2;
      const h = 400 - padding * 2;

      // Zone COVID (2020-2021)
      const covidStart = padding + (2020 - 2013) * (w / 10);
      const covidEnd = padding + (2021 - 2013) * (w / 10);
      svg.innerHTML += `<rect x="${covidStart}" y="${padding}" width="${covidEnd - covidStart}" height="${h}" class="covid-zone" />`;
      svg.innerHTML += `<text x="${covidStart + 10}" y="${padding + 20}" fill="#ff453a" font-size="12">PÃ©riode COVID</text>`;

      let points = "";
      topOnes.forEach((d, i) => {
        const x = padding + i * (w / 10);
        const y = padding + h - (d.boxOffice / maxBO) * h;
        points += `${x},${y} `;

        // Points
        svg.innerHTML += `<circle cx="${x}" cy="${y}" r="5" class="dot" onclick="alert('${d.title} (${d.year}): $${d.boxOffice.toLocaleString()}')" />`;
        
        // Labels AnnÃ©es
        svg.innerHTML += `<text x="${x}" y="${padding + h + 30}" class="axis-text" text-anchor="middle">${d.year}</text>`;
        
        // Label Valeur (tous les 2 ans pour clartÃ©)
        if(i % 2 === 0) {
            svg.innerHTML += `<text x="${x}" y="${y - 15}" fill="white" font-size="10" text-anchor="middle">$${(d.boxOffice/1e9).toFixed(1)}B</text>`;
        }
      });

      // Ligne de la courbe
      const polyline = document.createElementNS("http://www.w3.org/2000/svg", "polyline");
      polyline.setAttribute("points", points);
      polyline.setAttribute("class", "line");
      svg.appendChild(polyline);
    }

    slider.addEventListener("input", update);
    update();
  })();
</script>
</body>
</html>
