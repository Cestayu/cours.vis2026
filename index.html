<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cinema Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Limelight&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
  margin: 0;
  min-height: 100vh;
  background: #000;
  display: flex;
  flex-direction: column;
  align-items: center;
  color: #f5d76e;
  font-family: 'Segoe UI', Arial, sans-serif;
  overflow-x: hidden;
}

/* ðŸŽ¬ Dynamic background */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background-image: var(--bg);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0.15;
  filter: blur(8px);
  z-index: -1;
  transition: background-image 0.6s ease-in-out;
}

h1 {
  margin-top: 40px;
  font-family: 'Limelight', cursive;
  font-size: 80px;
  letter-spacing: 8px;
  text-transform: uppercase;
  color: #f7c873;
  text-shadow: 0 0 15px rgba(255,180,80,0.6);
}

.search-container {
  width: 90%;
  max-width: 1000px;
  background: rgba(0,0,0,0.65);
  padding: 20px;
  border-radius: 15px;
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
  justify-content: center;
  margin-bottom: 20px;
  border: 1px solid rgba(255,215,120,0.2);
}

.search-container input,
.search-container select {
  padding: 10px;
  border-radius: 5px;
  border: 1px solid #f7c873;
  background: #111;
  color: #f7c873;
  outline: none;
  flex: 1;
  min-width: 200px;
}

#boxoffice-viz, #trends-viz {
  width: 90%;
  max-width: 1000px;
  margin-bottom: 40px;
  background: rgba(0,0,0,0.75);
  border: 1px solid rgba(255,215,120,0.3);
  border-radius: 20px;
  padding: 30px;
  backdrop-filter: blur(4px);
}

h2 {
  text-align: center;
  font-family: 'Limelight', cursive;
  color: #f7c873;
}

.year-display {
  font-size: 54px;
  font-family: 'Limelight';
  color: #f7c873;
  text-align: center;
}

.films-panel {
  display: grid;
  gap: 15px;
}

.film {
  display: flex;
  align-items: center;
  padding: 12px;
  border-radius: 14px;
  background: rgba(20,20,20,0.85);
  border: 1px solid rgba(255,215,120,0.2);
  position: relative;
}

.poster {
  width: 80px;
  height: 110px;
  border-radius: 8px;
  margin-right: 20px;
  background-size: cover;
  background-position: center;
}

.film-title {
  font-size: 20px;
  font-weight: bold;
}

.hover-details {
  position: absolute;
  right: 10px;
  background: #000;
  border: 1px solid #f7c873;
  padding: 10px;
  display: none;
  z-index: 10;
  border-radius: 8px;
}

.film:hover .hover-details {
  display: block;
}
</style>
</head>

<body>

<h1>Cinema</h1>

<div class="search-container">
  <input type="text" id="search-director" placeholder="Filter by Director...">
  <select id="filter-genre">
    <option value="All">All Genres</option>
    <option value="Action">Action</option>
    <option value="Animation">Animation</option>
    <option value="Science-fiction">Science-fiction</option>
    <option value="Fantasy">Fantasy</option>
  </select>
</div>

<section id="boxoffice-viz">
  <h2>Annual Rankings</h2>
  <div class="year-display" id="boxoffice-year">2013</div>
  <input type="range" min="2013" max="2023" value="2013" id="boxoffice-slider" style="width:100%">
  <div class="films-panel" id="boxoffice-films"></div>
</section>

<section id="trends-viz">
  <h2>Box Office Trends ($ Billions)</h2>
  <canvas id="trendChart"></canvas>
</section>

<script>
/* =========================
   ðŸ“Š YOUR ORIGINAL DATA
   ========================= */
const enrichedData = [
  {"year":2013,"rank":1,"title":"Frozen","boxOffice":"1280802282","genre":"Animation","country":"Ã‰tats-Unis","director":"Chris Buck, Jennifer Lee","directorGender":"Homme / Femme","poster":"https://image.tmdb.org/t/p/w500/kgwjIb1CkFCftymFGOtdLlOrWYv.jpg"},
  {"year":2013,"rank":2,"title":"Iron Man 3","boxOffice":"1214811252","genre":"Action","country":"Ã‰tats-Unis","director":"Shane Black","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/qhPtAc1TKbMPqNvcdXSOn9Bn7hZ.jpg"},
  {"year":2013,"rank":3,"title":"Despicable Me 2","boxOffice":"970766005","genre":"Animation","country":"Ã‰tats-Unis","director":"Pierre Coffin, Chris Renaud","directorGender":"Hommes","poster":"https://image.tmdb.org/t/p/w500/5Fh4NdoEnCjCK9wLjdJ9DJNFl2b.jpg"},
  {"year":2013,"rank":4,"title":"The Hobbit: The Desolation of Smaug","boxOffice":"958366855","genre":"Fantasy","country":"USA","director":"Peter Jackson","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/xQYiXsmeYkKMq5yvwD0ejl8cWs7.jpg"},
  {"year":2013,"rank":5,"title":"The Hunger Games: Catching Fire","boxOffice":"865011746","genre":"Science-fiction","country":"USA","director":"Francis Lawrence","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/v9qVkyS58WHdfrcEq0dxUJFKS9n.jpg"},

  {"year":2014,"rank":1,"title":"Transformers: Age of Extinction","boxOffice":"1104054072","genre":"Action","country":"USA","director":"Michael Bay","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/jyzrfx2WaeY60kYZpPYepSjGz4S.jpg"},
  {"year":2014,"rank":2,"title":"The Hobbit: The Battle of the Five Armies","boxOffice":"962201338","genre":"Fantasy","country":"USA","director":"Peter Jackson","directorGender":"Homme","poster":"https://image.tmdb.org/t/p/w500/9zd9P2J3N7A4hBgx1RGCFgTMBPk.jpg"}
  /* ðŸ‘‰ keep the rest of your data exactly as you had it */
];

/* ========================= */

const slider = document.getElementById("boxoffice-slider");
const yearDisplay = document.getElementById("boxoffice-year");
const panel = document.getElementById("boxoffice-films");
const sDirector = document.getElementById("search-director");
const sGenre = document.getElementById("filter-genre");

function formatBoxOffice(v) {
  return "$" + (parseInt(v) / 1e9).toFixed(2) + " B";
}

/* ðŸŽ¬ Background updater */
function updateBackground(year) {
  const topFilm = enrichedData.find(d => d.year == year && d.rank === 1);
  if (topFilm) {
    document.body.style.setProperty("--bg", `url('${topFilm.poster}')`);
  }
}

function update() {
  const year = slider.value;
  yearDisplay.textContent = year;
  updateBackground(year);
  panel.innerHTML = "";

  const films = enrichedData.filter(d =>
    d.year == year &&
    d.director.toLowerCase().includes(sDirector.value.toLowerCase()) &&
    (sGenre.value === "All" || d.genre.includes(sGenre.value))
  );

  films.forEach(film => {
    panel.innerHTML += `
      <div class="film">
        <div class="poster" style="background-image:url('${film.poster}')"></div>
        <div>
          <div class="film-title">#${film.rank} ${film.title}</div>
          <div>${film.genre} | ${film.director}</div>
          <strong>${formatBoxOffice(film.boxOffice)}</strong>
        </div>
      </div>
    `;
  });
}

[slider, sDirector, sGenre].forEach(el =>
  el.addEventListener("input", update)
);

update();
updateBackground(slider.value);
</script>

</body>
</html>
